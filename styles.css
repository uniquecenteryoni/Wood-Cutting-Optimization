:root{--bg:#f6f3ef;--card:#fff;--muted:#5b5b5b;--accent:#b57b6d;--primary:#6a8f6b;--head1:#f0eadf;--head2:#e6efe6;--border:#e7e2da}
/* Headings font: Rubik */
@import url('https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap');
*{box-sizing:border-box}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;color:#1e1e1e;margin:0;padding:0;background:var(--bg)}
/* Better mobile tap behavior */
body{-webkit-tap-highlight-color: transparent}
h1,h2,h3{font-family:'Rubik', system-ui, -apple-system, Segoe UI, Roboto, Arial}
h2{font-size:22px}
h3{font-size:18px}
html[dir="rtl"] body{ text-align:right }
html[dir="ltr"] body{ text-align:left }
html[dir="rtl"] .container, html[dir="rtl"] .card{ text-align:right }
html[dir="ltr"] .container, html[dir="ltr"] .card{ text-align:left }
.topbar{display:flex;align-items:center;justify-content:center;padding:calc(10px + env(safe-area-inset-top)) 14px 10px;background:var(--head2);box-shadow:0 1px 4px rgba(0,0,0,.06);border-bottom:1px solid var(--border);position:relative}
.site-title{margin:0 auto;text-align:center;font-size:28px;background:transparent;padding:6px 12px;border-radius:10px;display:inline-block}
.top-left{position:absolute;left:14px;top:6px;bottom:6px;display:flex;align-items:center}
.site-logo{height:100%;width:auto;display:block;border:none;border-radius:0;background:transparent}
.top-actions{display:flex;gap:10px;position:absolute;top:10px;right:14px}
.top-actions .btn{min-height:40px}
.top-actions{display:flex;gap:10px;position:absolute;top:10px;right:14px}
.top-actions .btn{min-height:40px}
.main-nav{position:sticky;top:0;background:var(--card);border-bottom:1px solid var(--border);z-index:10}
.main-nav .nav-wrap{max-width:1200px;margin:0 auto;padding:8px 12px;display:flex;gap:8px;overflow-x:auto;-webkit-overflow-scrolling:touch}
.main-nav .nav-wrap::-webkit-scrollbar{display:none}
.nav-link{display:inline-block;padding:8px 12px;border-radius:999px;text-decoration:none;color:#2b2b2b;white-space:nowrap;transition:background .2s ease,color .2s ease}
.nav-link:hover{background:var(--head2)}
.nav-link.active{background:var(--primary);color:#fff}
.container{max-width:1200px;margin:16px auto;padding:0 12px;display:grid;grid-template-columns:1fr;gap:16px}
.card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,.04);border:1px solid var(--border)}
.card-head{display:flex;justify-content:space-between;align-items:center}
.card-head + *{margin-top:12px}
.small-controls{display:flex;gap:8px;align-items:center}
.small-controls #saw-thickness{width:64px}
/* Align project name and saw thickness controls */
.small-controls input[type="text"],
.small-controls input[type="number"]{
	padding:8px 10px;
	border:1px solid var(--border);
	border-radius:8px;
	font:inherit;
	height:34px;
	background:#fff;
}
.small-controls #project-name{min-width:180px; width:clamp(180px, 28vw, 260px)}
.small-controls .inline{gap:8px}
.small-controls label.inline{gap:8px; align-items:center}
.row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.btn{padding:8px 12px;border-radius:8px;border:1px solid var(--border);background:#fff;cursor:pointer;color:#2b2b2b;font-size:14px;line-height:1.2;transition:background .15s ease, box-shadow .15s ease, transform .05s ease}
.btn:hover{background:#faf8f4;box-shadow:0 2px 6px rgba(0,0,0,.06);transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.btn.icon-btn{padding:6px 10px;line-height:1}
.btn.primary{background:var(--primary);color:white;border:none}
.btn.primary:hover{background:#5b7f5c}
.btn.pink{background:var(--accent);color:white;border:none}
.btn.pink:hover{background:#a66f62}
/* Pistachio Save buttons */
.btn.btn-save, .btn.btn-save-new, #project-name-ok{
	background:var(--head2); /* match site title background */
	border-color:#d2e4d2;
	color:#1f3b2a;
}
.btn.btn-save:hover, .btn.btn-save-new:hover, #project-name-ok:hover{background:#d9e9d9}
.inline{display:flex;gap:6px;align-items:center}
.chip{display:inline-block;padding:0 6px;border-radius:10px;background:#eee;font-size:12px}
.hidden{display:none}
#requirements-list .req-row{display:flex;gap:8px;align-items:center;padding:8px 0;border-bottom:1px dashed #eee}
.req-row select,.req-row input{padding:6px;border:1px solid #ddd;border-radius:6px}
.req-row .btn-remove{
	background:#e57373; /* softer red */
	color:#fff;
	border:1px solid #d32f2f;
	font-weight:700;
}
.req-row .btn-remove:hover{background:#d32f2f;border-color:#b71c1c;color:#fff}
.req-row .btn-remove:active{background:#c62828;border-color:#8e1111;color:#fff}
.req-row .btn-remove:focus{outline:none;box-shadow:0 0 0 3px rgba(211,47,47,.25)}
.db-table{width:100%;border-collapse:collapse}
.db-table th,.db-table td{padding:8px;border:1px solid var(--border);text-align:center;font:inherit}
.db-table tbody tr{transition:background-color .12s ease}
.db-table tbody tr:hover{background:#f5faf5}
/* New-row classification select styling */
.db-table tr.new-row td{vertical-align:middle}
.db-table tr.new-row .inv-classification{
	display:block;
	width:100%;
	max-width:none;
	box-sizing:border-box;
	padding:8px 10px;
	border:1px solid var(--border);
	border-radius:8px;
	font:inherit;
	height:34px;
	background:#fff;
	text-align:start;
}
.db-table thead tr:first-child th{background:var(--head1)}
.db-table thead tr:nth-child(2) th{background:var(--head2)}
.db-area{overflow:auto;max-height:60vh;padding-top:6px}
.db-table thead tr:first-child th{position:sticky;top:0;z-index:2}
.db-table thead tr:nth-child(2) th{position:sticky;top:34px;z-index:1}
.actions{margin-top:12px;display:flex;gap:8px}
.actions-center{justify-content:center}
.footer{padding:12px;text-align:center;color:var(--muted)}
.file-btn input{display:none}
.file-btn{display:inline-flex;align-items:center;gap:8px}
.file-btn span{font:inherit}
.req-row .small{font-size:12px;color:var(--muted)}
.results-section{margin-top:12px}
.diagram{border:1px solid var(--border);border-radius:6px;padding:8px;background:#fff}
.diagram text{pointer-events:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.legend{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.legend .item{display:flex;gap:6px;align-items:center}
.pastel{border-radius:4px;width:20px;height:14px}
/* Loader overlay (full-screen) */
.loader-overlay{
	position:fixed;
	inset:0;
	z-index:9999;
	display:flex;
	flex-direction:column;
	align-items:center;
	justify-content:center;
	background:rgba(255,255,255,.82);
	backdrop-filter:saturate(120%) blur(2px);
}
.lottie-box{width:600px;height:600px}
@media(max-width:700px){
	.lottie-box{width:clamp(220px, 70vw, 420px); height:clamp(220px, 70vw, 420px)}
}
.loader-text{margin-top:6px;font-size:20px;color:#2b2b2b;text-align:center;max-width:80%;}
.hidden{display:none}
/* Fallback spinner */
.spinner{width:64px;height:64px;border-radius:50%;border:4px solid #d8e7d8;border-top-color:#6a8f6b;animation:spin 1s linear infinite}
@media (prefers-reduced-motion: reduce){
	.spinner{animation:none}
}
@keyframes spin{to{transform:rotate(360deg)}}
/* Plans page */
.plans-toolbar{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
.search-input{padding:8px 12px;border:1px solid var(--border);border-radius:999px;min-width:220px;width:min(360px,100%);font:inherit}
.plans-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px}
.plan-card{background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden;display:flex;flex-direction:column}
.plan-card .thumb{position:relative;aspect-ratio:16/9;background:linear-gradient(135deg,#b57b6d,#6a8f6b);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;overflow:hidden}
.plan-card .thumb-img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:block;transition:opacity .25s ease}
.plan-card .thumb-img.secondary{opacity:0}
@media (hover:hover) and (pointer:fine){
	.plan-card:hover .thumb-img.secondary{opacity:1}
	.plan-card:hover .thumb-img.primary{opacity:0}
}
.plan-card .body{padding:10px 12px}
.plan-card h3{margin:0 0 6px;font-size:18px}
.plan-card p{margin:0 0 10px;color:var(--muted)}
.plan-card .price{font-weight:700;margin-bottom:10px}
.plan-card .card-actions{padding:0 12px 12px}
/* About */
.about-wrap{display:grid;grid-template-columns:1fr 1.2fr;gap:16px;align-items:center}
.about-photo img{width:100%;height:auto;border-radius:12px;border:1px solid var(--border);display:block}
.about-text h2{margin-top:0}
.about-meta{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
@media(max-width:900px){.about-wrap{grid-template-columns:1fr}}
/* הצגה אנכית של הבלוקים גם במסכים רחבים */
@media(min-width:900px){.container{grid-template-columns:1fr}}
@media(max-width:600px){.topbar h1{font-size:16px}.btn{padding:6px 8px}.container{grid-template-columns:1fr}}

/* Forms */
.form-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.form-field{display:flex;flex-direction:column;gap:6px}
.form-field-full{grid-column:1/-1}
.form-field label{font-size:14px;color:#333}
.form-field input,.form-field textarea{padding:10px 12px;border:1px solid var(--border);border-radius:8px;font:inherit;background:#fff}
.form-field input:focus,.form-field textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(106,143,107,.15)}
.form-actions{display:flex;gap:8px;justify-content:flex-start}
.form-status{margin-top:8px;color:var(--muted)}
@media(max-width:700px){.form-grid{grid-template-columns:1fr}}
